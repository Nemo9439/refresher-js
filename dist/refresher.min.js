!function(){const o="refresher-js-toast",t="#004dff",e="New version is available",s="Please refresh the page",n="Refresh",r=120;let i=!1;createToastElement=()=>{const t=document.createElement("div");t.id=o;var e=`
                          <svg class="close-btn" viewPort="0 0 12 12" version="1.1"
                                              xmlns="http://www.w3.org/2000/svg" onclick="closeToast()">
                                              <line x1="1" y1="11"
                                                    x2="11" y2="1"
                                                    stroke="black"
                                                    stroke-width="2"/>
                                              <line x1="1" y1="1"
                                                    x2="11" y2="11"
                                                    stroke="black"
                                                    stroke-width="2"/>
                            </svg>
                        <h2>${d}</h2>
                        <p>${p}</p>
                        <div class="buttons">
                          <button class="refresh" onclick="refresh()">${f}</button>

                `;return t.innerHTML=e,document.body.appendChild(t),appendCustomCss(t),t},appendCustomCss=t=>{const e=document.createElement("style");t.appendChild(e),e.innerHTML=`
  #${o} {
    position: fixed;
    display: block;
    min-width: 150px;
    bottom: 0;
    left: 20px;
    padding: 20px;
    border-radius: 5px;
    background: #ffffffd1;
    box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
    transition: 0.3s transform;
    border: 1px solid #efefef;
    border-left: 5px solid ${u};
    transform: translate(0, 100%);
    backdrop-filter: blur(10px);
    font-weight: lighter;
  }

  #${o}.opened {
    transform: translate(0, -15%);
  }

  #${o} .close-btn {
    position: absolute;
    right: 20px;
    top: 20px;
    width: 15px;
    height: 15px;
    cursor: pointer;
    opacity: 0.6;
    transition: 0.3s;
  }

  #${o} .close-btn:hover {
    opacity: 1;
  }

  #${o} .buttons {
    display: flex;
    justify-content: flex-end;
    margin-top: 20px;
  }

  #${o} button {
    border-width: 0;
    padding: 8px 12px;
    border-radius: 4px;
    cursor: pointer;
    outline: none;
    transition: filter 0.3s;
    font-size: 0.9rem;
  }

  #${o} button.refresh {
    color: #fff;
    background-color: ${u};
    filter: saturate(0.8);
    font-size: 0.9rem;
  }

  #${o} button.refresh:hover {
    filter: saturate(1)
  }

  #${o} h2 {
    font-weight: lighter;
    margin: 0;
    padding-right: 40px;
  }

  #${o} p {
        margin: 0;
        margin-top: 10px;
        opacity: 0.8;
        font-size: 0.9rem;
  }

  `},openToastLater=()=>{setTimeout(()=>{openToast()},6e4*c)},refresh=()=>{location.reload(!0)},closeToast=()=>{const t=getToastElement();t.classList.remove("opened"),setTimeout(()=>{t.remove()},1e3),openToastLater()},openToast=()=>{if(dispatchOpenToastEvent(),!getToastElement()&&!m){const t=createToastElement();setTimeout(()=>{t.classList.add("opened")},1e3)}},getToastElement=()=>document.getElementById(o),dispatchOpenToastEvent=()=>{document.dispatchEvent(new Event("refresher-js-open-toast"))},getPollingResourceSrc=()=>{const t=[...document.getElementsByTagName("script")];return(t.filter(t=>t?.src?.includes("main.")&&"module"===t?.type)?.[0])?.src},getRefresherScriptTag=()=>document.getElementById("refresher-js-script"),handleCustomFunction=async()=>{await Window[g]()&&(openToast(),clearInterval(h))},subscribeToActivityEvents=()=>{document.onvisibilitychange=()=>{"visible"===document.visibilityState&&(i=!0)},onclick=()=>{i=!0}};const a=new XMLHttpRequest,l=(a.onload=t=>{404===t?.target?.status&&(openToast(),clearInterval(h))},getRefresherScriptTag()),c=Number(l.getAttribute("data-polling-interval-in-minutes"))??r,d=l.getAttribute("data-title-text")??e,p=l.getAttribute("data-subtitle-text")??s,u=l.getAttribute("data-primary-color")??t,f=l.getAttribute("data-refresh-button-text")??n,m="true"===l.getAttribute("data-disable-toast"),g=l.getAttribute("data-custom-function-name"),b=getPollingResourceSrc(),h=(subscribeToActivityEvents(),setInterval(async()=>{if(!getToastElement()&&i){if(i=!1,g)return handleCustomFunction();a.open("GET",b),a.send()}},6e4*c))}();
