!function(){const o="refresher-js-toast";let e=!1;createToastElement=()=>{const e=document.createElement("div");e.id=o;return e.innerHTML=`
                          <svg class="close-btn" viewPort="0 0 12 12" version="1.1"
                                              xmlns="http://www.w3.org/2000/svg" onclick="closeToast()">
                                              <line x1="1" y1="11"
                                                    x2="11" y2="1"
                                                    stroke="black"
                                                    stroke-width="2"/>
                                              <line x1="1" y1="1"
                                                    x2="11" y2="11"
                                                    stroke="black"
                                                    stroke-width="2"/>
                            </svg>
                        <h1>New version is available</h1>
                        <p>Please refresh the page</p>
                        <div class="buttons">
                          <button class="refresh" onclick="refresh()">Refresh</button>

                `,document.body.appendChild(e),appendCustomCss(e),e},appendCustomCss=e=>{const t=document.createElement("style");e.appendChild(t),t.innerHTML=`
  #${o} {
    background: white;
    position: fixed;
    display: block;
    width: 400px;
    bottom: 0;
    left: 20px;
    padding: 20px;
    border-radius: 5px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
    transition: 0.3s transform;
    border: 1px solid #efefef;
    transform: translate(0, 100%);
  }

  #${o}.opened {
    transform: translate(0, -15%);
  }

  #${o} .close-btn {
    position: absolute;
    right: 20px;
    top: 20px;
    width: 15px;
    height: 15px;
    cursor: pointer;
    opacity: 0.6;
    transition: 0.3s;
  }

  #${o} .close-btn:hover {
    opacity: 1;
  }

  #${o} .buttons {
    display: flex;
    justify-content: flex-end;
    margin-top: 20px;
  }

  #${o} button {
    border-width: 0;
    padding: 8px 12px;
    border-radius: 4px;
    cursor: pointer;
    outline: none;
    transition: filter 0.3s;
  }

  #${o} button.refresh {
    color: #fff;
    background-color: #004dff;
    filter: saturate(0.7)
  }

  #${o} button.refresh:hover {
    filter: saturate(1)
  }

  #${o} h1 {
    font-size: 2.4rem;
    font-weight: 700;
    margin: 0;
  }

  #${o} p {
        margin: 0;
  }

  `},openToastLater=()=>{setTimeout(()=>{openToast()},6e4*n)},refresh=()=>{location.reload(!0)},closeToast=()=>{const e=getToastElement();e.classList.remove("opened"),setTimeout(()=>{e.remove()},1e3),openToastLater()},openToast=()=>{if(!getToastElement()){const e=createToastElement();setTimeout(()=>{e.classList.add("opened")},1e3)}},getToastElement=()=>document.getElementById(o),getPollingResourceSrc=()=>{const e=[...document.getElementsByTagName("script")];return(e.filter(e=>e?.src?.includes("main.")&&"module"===e?.type)?.[0])?.src},getRefresherScriptTag=()=>document.getElementById("refresher-js-script"),subscribeToActivityEvents=()=>{document.onvisibilitychange=()=>{"visible"===document.visibilityState&&(e=!0)},onclick=()=>{e=!0}};const t=new XMLHttpRequest,s=(t.onload=e=>{404===e?.target?.status&&(openToast(),clearInterval(i))},getRefresherScriptTag()),n=s.getAttribute("data-polling-interval-in-minutes")??120,r=getPollingResourceSrc(),i=(subscribeToActivityEvents(),setInterval(()=>{getToastElement()||e&&(e=!1,t.open("GET",r),t.send())},6e4*n))}();
