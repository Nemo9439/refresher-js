!function(){const n="refresher-js-toast",t="#004dff",e="New version is available",o="Please refresh the page",r="Refresh",s=120;let i=!1;createToastElement=()=>{const t=document.createElement("div");t.id=n;var e=`
                          <svg class="close-btn" viewPort="0 0 12 12" version="1.1"
                                              xmlns="http://www.w3.org/2000/svg" onclick="closeToast()">
                                              <line x1="1" y1="11"
                                                    x2="11" y2="1"
                                                    stroke="black"
                                                    stroke-width="2"/>
                                              <line x1="1" y1="1"
                                                    x2="11" y2="11"
                                                    stroke="black"
                                                    stroke-width="2"/>
                            </svg>
                        <h2>${d}</h2>
                        <p>${p}</p>
                        <div class="buttons">
                          <button class="refresh" onclick="refresh()">${f}</button>

                `;return t.innerHTML=e,document.body.appendChild(t),appendCustomCss(t),t},appendCustomCss=t=>{const e=document.createElement("style");t.appendChild(e),e.innerHTML=`
  #${n} {
    position: fixed;
    display: block;
    min-width: 150px;
    bottom: 0;
    left: 20px;
    padding: 20px;
    border-radius: 5px;
    background: #ffffffd1;
    box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
    transition: 0.3s transform;
    border: 1px solid #efefef;
    border-left: 5px solid ${u};
    transform: translate(0, 100%);
    backdrop-filter: blur(10px);
    font-weight: lighter;
  }

  #${n}.opened {
    transform: translate(0, -15%);
  }

  #${n} .close-btn {
    position: absolute;
    right: 20px;
    top: 20px;
    width: 15px;
    height: 15px;
    cursor: pointer;
    opacity: 0.6;
    transition: 0.3s;
    z-index: 999;
  }

  #${n} .close-btn:hover {
    opacity: 1;
  }

  #${n} .buttons {
    display: flex;
    justify-content: flex-end;
    margin-top: 20px;
  }

  #${n} button {
    border-width: 0;
    padding: 8px 12px;
    border-radius: 4px;
    cursor: pointer;
    outline: none;
    transition: filter 0.3s;
  }

  #${n} button.refresh {
    color: #fff;
    background-color: ${u};
    filter: saturate(0.8);
  }

  #${n} button.refresh:hover {
    filter: saturate(1)
  }

  #${n} h2 {
    font-weight: lighter;
    margin: 0;
    padding-right: 40px;
  }

  #${n} p {
        margin: 0;
        margin-top: 10px;
        opacity: 0.8;
  }

  `},openToastLater=()=>{setTimeout(()=>{openToast()},6e4*c)},refresh=()=>{location.reload(!0)},closeToast=()=>{const t=getToastElement();t.classList.remove("opened"),setTimeout(()=>{t.remove()},1e3),openToastLater()},openToast=()=>{if(dispatchOpenToastEvent(),!getToastElement()&&!g){const t=createToastElement();setTimeout(()=>{t.classList.add("opened")},1e3)}},getToastElement=()=>document.getElementById(n),dispatchOpenToastEvent=()=>{document.dispatchEvent(new Event("refresher-js-open-toast"))},getMainScript=t=>{const e=[...t.getElementsByTagName("script")];t=e.filter(t=>t?.src?.includes("main."))?.[0];return(t||e.filter(t=>t?.src?.includes("app.")||t?.src?.includes("index."))?.[0])?.src},getRefresherScriptTag=()=>document.getElementById("refresher-js-script"),handleCustomFunction=async()=>{await window[m]()&&(openToast(),clearInterval(x))},subscribeToActivityEvents=()=>{document.onvisibilitychange=()=>{"visible"===document.visibilityState&&(i=!0)},onclick=()=>{i=!0}};const a=new XMLHttpRequest,l=(a.onload=t=>{t=(new DOMParser).parseFromString(t.target.response,"text/html"),t=getMainScript(t);h!==t&&(openToast(),clearInterval(x),h=t)},getRefresherScriptTag()),c=Number(l.getAttribute("data-polling-interval-in-minutes"))??s,d=l.getAttribute("data-title-text")??e,p=l.getAttribute("data-subtitle-text")??o,u=l.getAttribute("data-primary-color")??t,f=l.getAttribute("data-refresh-button-text")??r,g="true"===l.getAttribute("data-disable-toast"),m=l.getAttribute("data-custom-function-name"),b=window.location.href;let h=getMainScript(window.document);subscribeToActivityEvents();const x=setInterval(async()=>{if(!getToastElement()&&i){if(i=!1,m)return handleCustomFunction();a.open("GET",b),a.send()}},6e4*c)}();
